# vim: ft=sh
#
# Common shell aliases (bash/zsh).
#
# Shell-related shortcuts that I might use in a terminal session belong here.
# Most application launchers (e.g.  dmenu_run) can't read aliases though, so
# some things may go in my ~/bin as scripts instead.
#

# enable completion for aliases when prefixing sudo
alias sudo="sudo "

# as of 2015-11-04 commit 109b9220c, ls now uses a different default quoting
# method for terminals. I don't like it (makes my music library etc. look ugly)
alias ls="ls --color=auto --literal"

## Common shortcuts {{{
# cd to a directory and ls if it succeeds
# previously had a habit of immediate ls; this helps me not do that
cdl() {
    cd $@
    if [ $? -eq 0 ]; then
        ls --color=auto
    else
        return $?
    fi
}
alias c="cdl"

# useful ls aliases
alias ll="ls -lh"
alias la="ls -lAh"
alias l="ls"
alias lb="ls -la"

alias g="git"
alias t="tmux"
alias v="vim"
alias cm="git commit -m"

# quicker 'date now' command
alias d="date +%F"

# cdl to a shortcutted directory (in ~/sh)
shcdl() {
    cdl ~/sh/"$1"
}
alias s="shcdl"
## }}}

## Common shortcuts - not internalized {{{
# quicker 'remove all empty dirs' command
alias rmds="rmdir --ignore-fail-on-non-empty *"

# kubectl
alias k=kubectl

# Terraform
alias tf=terraform
## }}}

## Use colours {{{
alias grep="grep --color=auto"
## }}}

# cd to the real path of current directory
real() {
    if [[ $# > 0 ]]; then
        # we got an argument, so cd to it's realpath
        if [[ -d "$1" ]]; then
            # it's a directory
            new_dir="$(realpath "$1")"
        else
            # it's a file, so cd to it's directory
            new_file="$(realpath "$1")"
            new_dir="${new_file%/*}"
        fi
    else
        # no arguments, use current directory
        new_dir="$(realpath .)"
    fi

    cd "$new_dir"
}

# copy a file to the X clipboard
alias clpb="xsel -i -b < "

# useful mount shortcut for non-POSIX FSes e.g. NTFS: current user, UTF-8
alias ntfsmount="mount -ouid=$(id -u),gid=$(id -g),utf8"

## [Fuck you, ]Docker {{{
#alias docker="sudo docker"
## }}}

# password-store / pass: put in (X) clipboard by default (override via \pass)
alias pass="pass -c"
