# i3 config file (v4).
# vim: set foldmethod=marker :
#
# see http://i3wm.org/docs/userguide.html for a complete reference
#

## Local variables {{{
# i3's variables aren't particularly great. i.e., you can't set a
# variable to a variable, and quoting and whatnot is really weird and I
# generally don't trust it.
# --no-startup-id disables startup notifications for that window, so we
# don't get the hourglass pointer for 60 secs
# see https://faq.i3wm.org/question/561
set $exec exec --no-startup-id

# v - this does NOT work! - v
#set $i3_msg $exec i3-msg
set $i3_msg exec --no-startup-id i3-msg
## }}}

## General {{{
# set i3 config directory
set $conf_dir ~/.config/i3

# set py3status config directory
set $py3status_dir ~/.config/py3status
## }}}

## Appearance {{{
# font for window titles. Will also be used by the bar unless a
# different font is defined in the bar {} block below.
# DejaVu Sans Mono provides lots of Unicode glyphs, right-to-text
# rendering and looks nice.
#font pango:DejaVu Sans Mono 10
# Terminus is for hackers only 8)
font pango:Terminus 10
## }}}

## Programs {{{
# (suggested absolute paths so no one can mess with them)
set $terminal /usr/bin/urxvt
set $browser /usr/bin/firefox
## }}}

## Modes {{{
# resize mode (can also use $mod + right/left click)
mode "resize" {
    # note: mode bindings only apply while the mode is active

    # grow/shrink (from top-left i.e. down, right = grow)
    # (shifted Vim keys)
    bindsym j         resize shrink width  10 px or 10 ppt
    bindsym k         resize grow   height 10 px or 10 ppt
    bindsym l         resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow   width  10 px or 10 ppt

    # grow/shrink (from top-left i.e. down, right = grow)
    # (arrow keys)
    bindsym Left  resize shrink width  10 px or 10 ppt
    bindsym Down  resize grow   height 10 px or 10 ppt
    bindsym Up    resize shrink height 10 px or 10 ppt
    bindsym Right resize grow   width  10 px or 10 ppt

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
## }}}

## Keybinds {{{
### Modifiers {{{
# main i3 modifier key
# Mod4 = Win
set $mod Mod4

# drag floating windows with mouse + floating_modifier
floating_modifier $mod
### }}}

### Programs {{{
# start a terminal
bindsym $mod+Return exec $terminal

# start browser
bindsym $mod+Shift+Return exec $browser

# start dmenu (program launcher)
bindsym $mod+d exec dmenu_run

# start Anki
bindsym $mod+Shift+a exec anki
### }}}

### Moving workspaces {{{
# switch to workspace [beginning with] X
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# switch to previous workspace
bindsym $mod+z workspace back_and_forth

# move focused container to workspace [beginning with] X
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# move focused container to previous workspace
bindsym $mod+Shift+z move container to workspace back_and_forth

# move workspace to another output
# rolls over e.g. if only 2 outputs, left & right are identical
bindsym $mod+x move workspace to output right
### }}}

### Moving windows {{{
# change focus window (shifted Vim keys)
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# change focus window (arrow keys)
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window (shifted Vim keys)
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# move focused window (arrow keys)
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
### }}}

### Windows {{{
# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# make current window a scratchpad
bindsym $mod+Shift+minus move scratchpad

# show first scratchpad window
bindsym $mod+minus scratchpad show

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# kill focused window
bindsym $mod+Shift+q kill
### }}}

### i3 {{{
# reload i3 config file (i.e. this file)
bindsym $mod+Shift+r reload

# restart i3 in-place (preserves your layout & session, can be used to
# upgrade i3)
bindsym $mod+Control+Shift+r restart

# exit i3 (exits X too)
bindsym $mod+Shift+e exit
### }}}

### Modes {{{
# enter resize mode
bindsym $mod+r mode "resize"
### }}}

### Multimedia {{{
# volume multimedia keys
bindsym XF86AudioRaiseVolume $exec "amixer -M set Master 1dB+"
bindsym XF86AudioLowerVolume $exec "amixer -M set Master 1dB-"
bindsym XF86AudioMute $exec "amixer set Master toggle"

# MPD volume keybinds
bindsym $mod+XF86AudioRaiseVolume $exec "mpc volume +5"
bindsym $mod+XF86AudioLowerVolume $exec "mpc volume -5"

# special multimedia keys
bindsym XF86AudioPlay $exec "mpc toggle"
bindsym XF86AudioStop $exec "mpc stop"
bindsym XF86AudioPrev $exec "mpc prev"
bindsym XF86AudioNext $exec "mpc next"

# special MPD keys
bindsym $mod+XF86AudioNext $exec "mpd-insert-best"

# brightness keys
bindsym XF86MonBrightnessUp $exec "xbacklight -inc 10 -time 0"
bindsym XF86MonBrightnessDown $exec "xbacklight -dec 10 -time 0"
### }}}

### Screenshots {{{
# set scrot options & directory
set $scrot scrot '%Y-%m-%d-%T_$wx$h_scrot.png' -e 'mv $f ~/media/screenshots'

# TODO: can't capture currently focused screen with scrot!
# capture currently focused window
bindsym Print $exec "$scrot -u"

# capture a selection
bindsym --release $mod+Print $exec "$scrot -s"

# capture all screens together
bindsym Shift+Print $exec "$scrot"
### }}}

### Computer {{{
# turn off screen
bindsym $mod+F2 $exec "scr"

# lock computer
bindsym XF86Display $exec "lock"

# turn off computer
bindsym $mod+Shift+Delete $exec "poweroff"

# turn off touchpad
bindsym $mod+F6 $exec "touchpad-toggle"

# lock computer & standby
bindsym $mod+F1 $exec "lockstb"
### }}}

### Etc. {{{
# 'swap' outputs
bindsym $mod+Shift+x exec "outswap"
### }}}
## }}}

## Behaviour {{{
# enable back and forth (hitting the bindsym for your current workspace
# will switch you to your previous workspace)
#workspace_auto_back_and_forth yes

# set default output (monitor) for each workspace
# looks like workspace number doesn't work here :/
workspace 1 output eDP1
workspace 2 output eDP1
workspace 3 output VGA1
workspace 4 output VGA1
## }}}

## Bar {{{
bar {
        status_command i3status | i3status-wrapper.py
        #status_command $conf_dir/i3pystatus-run.py
        #status_command py3status -i $py3status_dir/modules -c $py3status_dir/config
}
## }}}

## Autostarting {{{
### Applications {{{
# Things to remember:
#
#   - prefix exec with a switch to the workspace you want the program on
#   - remember to title things when required by your layouts
#   - the selected window for a workspace seems pretty hard to set -
#     the order in which you start things might have an effect, but it
#     doesn't seem reliable
#
$i3_msg 'workspace number 1; exec $terminal -title "work"'
$i3_msg 'workspace number 2; exec $browser'
$i3_msg 'workspace number 3; exec $terminal -title "mutt"'
$i3_msg 'workspace number 3; exec $terminal -title "irssi"'
$i3_msg 'workspace number 3; exec $terminal -title "calcurse" -e calcurse'
$i3_msg 'workspace number 4; exec $terminal -title "ncmpcpp" -e mpn'
$i3_msg 'workspace number 4; exec $terminal -title "alsamixer" -e alsamixer'
### }}}

### Layouts {{{
# Note: there is no point in using a layout if a workspace has just 1
#       window
#
# Remember to prefix the layout with a change to the wanted workspace!
# Keep in mind that the last workspace to have a layout appended to it
# will probably be the active one on startup.
#
$i3_msg 'workspace number 3; append_layout "$conf_dir/workspace-3"'
$i3_msg 'workspace number 4; append_layout "$conf_dir/workspace-4"'

# try to make a specific workspace active on startup
$i3_msg 'workspace number 1'

### }}}
## }}}
